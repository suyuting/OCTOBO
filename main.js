// Generated by CoffeeScript 1.7.1
(function() {
  var easeInOutSine, getScrollers, getTargetEl, scrollTo, scroller, _i, _len, _ref;

  easeInOutSine = function(t, startVal, endVal, duration) {
    var delta;
    delta = endVal - startVal;
    return -delta / 2 * (Math.cos(Math.PI * t / duration) - 1) + startVal;
  };

  scrollTo = function(element, to, duration, cb) {
    var initialValue, start, step;
    initialValue = element.scrollTop;
    start = null;
    step = function(timestamp) {
      var progress;
      if (start === null) {
        start = timestamp;
      }
      progress = timestamp - start;
      if (progress < duration) {
        element.scrollTop = easeInOutSine(progress, initialValue, to, duration);
        return window.requestAnimationFrame(step);
      }
    };
    cb();
    return window.requestAnimationFrame(step);
  };

  getTargetEl = function(a) {
    return document.getElementById(a.getAttribute('href').slice(1));
  };

  getScrollers = function() {
    var a, _i, _len, _ref, _results;
    _ref = document.getElementsByTagName('a');
    _results = [];
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      a = _ref[_i];
      if (a.getAttribute('href')[0] === '#') {
        _results.push(a);
      }
    }
    return _results;
  };

  _ref = getScrollers();
  for (_i = 0, _len = _ref.length; _i < _len; _i++) {
    scroller = _ref[_i];
    scroller.onclick = function() {
      var dest, duration, target;
      target = getTargetEl(this);
      dest = target != null ? target.offsetTop : 0;
      duration = Math.abs(document.body.scrollTop - dest) / 3;
      console.log("HI");
      scrollTo(document.body, dest, duration, function() {
        return window.location.hash = (target != null ? target.id : '#');
      });
      return false;
    };
  }

}).call(this);
